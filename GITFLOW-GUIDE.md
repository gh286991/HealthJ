# ğŸš€ GitFlow éƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

é€™å€‹å°ˆæ¡ˆä½¿ç”¨ GitFlow å·¥ä½œæµç¨‹ä¾†ç®¡ç†ç¨‹å¼ç¢¼çš„é–‹ç™¼ã€æ¸¬è©¦å’Œéƒ¨ç½²ã€‚æˆ‘å€‘æ•´åˆäº† GitHub Actions å’Œ Zeabur ä¾†è‡ªå‹•åŒ–éƒ¨ç½²æµç¨‹ã€‚

## ğŸŒ¿ åˆ†æ”¯ç­–ç•¥

### ä¸»è¦åˆ†æ”¯
- **`main`** - ç”Ÿç”¢ç’°å¢ƒåˆ†æ”¯ï¼ŒåŒ…å«ç©©å®šä¸”ç¶“éæ¸¬è©¦çš„ç¨‹å¼ç¢¼
- **`develop`** - é–‹ç™¼ä¸»åˆ†æ”¯ï¼Œæ•´åˆæ‰€æœ‰åŠŸèƒ½é–‹ç™¼

### æ”¯æ´åˆ†æ”¯
- **`staging`** - æ¸¬è©¦ç’°å¢ƒåˆ†æ”¯ï¼Œç”¨æ–¼æœ€çµ‚æ¸¬è©¦å’Œé©—è­‰
- **`feature/*`** - åŠŸèƒ½é–‹ç™¼åˆ†æ”¯ï¼Œå¾ `develop` åˆ†æ”¯å»ºç«‹
- **`hotfix/*`** - ç·Šæ€¥ä¿®å¾©åˆ†æ”¯ï¼Œå¾ `main` åˆ†æ”¯å»ºç«‹
- **`release/*`** - ç™¼å¸ƒæº–å‚™åˆ†æ”¯ï¼Œå¾ `develop` åˆ†æ”¯å»ºç«‹

## ğŸ”„ å·¥ä½œæµç¨‹

### 1. åŠŸèƒ½é–‹ç™¼
```bash
# å¾ develop åˆ†æ”¯å»ºç«‹åŠŸèƒ½åˆ†æ”¯
git checkout develop
git pull origin develop
git checkout -b feature/æ–°åŠŸèƒ½åç¨±

# é–‹ç™¼å®Œæˆå¾Œï¼Œåˆä½µå› develop
git checkout develop
git merge feature/æ–°åŠŸèƒ½åç¨±
git push origin develop
git branch -d feature/æ–°åŠŸèƒ½åç¨±
```

### 2. ç™¼å¸ƒæº–å‚™
```bash
# å¾ develop å»ºç«‹ç™¼å¸ƒåˆ†æ”¯
git checkout develop
git pull origin develop
git checkout -b release/v1.0.0

# ä¿®å¾© bug å’Œæœ€çµ‚èª¿æ•´
# åˆä½µåˆ° staging åˆ†æ”¯é€²è¡Œæ¸¬è©¦
git checkout staging
git merge release/v1.0.0
git push origin staging

# æ¸¬è©¦å®Œæˆå¾Œï¼Œåˆä½µåˆ° main
git checkout main
git merge release/v1.0.0
git tag v1.0.0
git push origin main --tags

# åˆä½µå› develop
git checkout develop
git merge release/v1.0.0
git push origin develop

# æ¸…ç†ç™¼å¸ƒåˆ†æ”¯
git branch -d release/v1.0.0
```

### 3. ç·Šæ€¥ä¿®å¾©
```bash
# å¾ main å»ºç«‹ç†±ä¿®å¾©åˆ†æ”¯
git checkout main
git pull origin main
git checkout -b hotfix/ç·Šæ€¥ä¿®å¾©

# ä¿®å¾©å®Œæˆå¾Œï¼Œåˆä½µåˆ° main
git checkout main
git merge hotfix/ç·Šæ€¥ä¿®å¾©
git tag v1.0.1
git push origin main --tags

# åˆä½µå› develop
git checkout develop
git merge hotfix/ç·Šæ€¥ä¿®å¾©
git push origin develop

# æ¸…ç†ç†±ä¿®å¾©åˆ†æ”¯
git branch -d hotfix/ç·Šæ€¥ä¿®å¾©
```

## ğŸš€ éƒ¨ç½²æµç¨‹

### æ‰‹å‹•è§¸ç™¼éƒ¨ç½²

1. å‰å¾€ GitHub å°ˆæ¡ˆçš„ **Actions** é é¢
2. é¸æ“‡ **ğŸš€ Deploy to Zeabur** å·¥ä½œæµç¨‹
3. é»æ“Š **Run workflow** æŒ‰éˆ•
4. è¨­å®šéƒ¨ç½²åƒæ•¸ï¼š
   - **éƒ¨ç½²ç’°å¢ƒ**: é¸æ“‡ `dev`ã€`stg` æˆ– `prod`
   - **å¾Œç«¯å°ˆæ¡ˆåˆ†æ”¯**: è¼¸å…¥ HealthRecord å°ˆæ¡ˆçš„åˆ†æ”¯åç¨±
   - **å‰ç«¯å°ˆæ¡ˆåˆ†æ”¯**: è¼¸å…¥ HealthRecord-FE å°ˆæ¡ˆçš„åˆ†æ”¯åç¨±
   - **æ˜¯å¦å»ºç½®å¾Œç«¯**: é¸æ“‡æ˜¯å¦é‡æ–°å»ºç½®å¾Œç«¯
   - **æ˜¯å¦å»ºç½®å‰ç«¯**: é¸æ“‡æ˜¯å¦é‡æ–°å»ºç½®å‰ç«¯
   - **å¼·åˆ¶éƒ¨ç½²**: è·³éæ¸¬è©¦ç›´æ¥éƒ¨ç½²ï¼ˆè¬¹æ…ä½¿ç”¨ï¼‰

### ğŸ†• å‹•æ…‹åˆ†æ”¯åµæ¸¬

ç¾åœ¨å·¥ä½œæµç¨‹æ”¯æ´**å‹•æ…‹åˆ†æ”¯åµæ¸¬**ï¼Œä¸å†éœ€è¦é å…ˆå®šç¾©å›ºå®šçš„åˆ†æ”¯é¸é …ï¼š

- âœ… **è‡ªå‹•åµæ¸¬**: ç³»çµ±æœƒè‡ªå‹•æƒææ‚¨çš„å‰å¾Œç«¯å°ˆæ¡ˆæ‰€æœ‰å¯ç”¨åˆ†æ”¯
- âœ… **éˆæ´»è¼¸å…¥**: æ‚¨å¯ä»¥ç›´æ¥è¼¸å…¥ä»»ä½•å­˜åœ¨çš„åˆ†æ”¯åç¨±
- âœ… **å³æ™‚é¡¯ç¤º**: éƒ¨ç½²æ™‚æœƒé¡¯ç¤ºæ‰€æœ‰å¯ç”¨åˆ†æ”¯çš„å®Œæ•´åˆ—è¡¨
- âœ… **ç„¡éœ€ç¶­è­·**: ä¸éœ€è¦æ‰‹å‹•æ›´æ–°åˆ†æ”¯é¸é …

### åˆ†æ”¯è¼¸å…¥ç¯„ä¾‹

#### å¾Œç«¯å°ˆæ¡ˆ (HealthRecord) åˆ†æ”¯
- `develop` - é–‹ç™¼åˆ†æ”¯
- `staging` - æ¸¬è©¦åˆ†æ”¯
- `main` - ä¸»åˆ†æ”¯
- `feature/health-tracking` - åŠŸèƒ½åˆ†æ”¯
- `hotfix/security-patch` - ç†±ä¿®å¾©åˆ†æ”¯
- `release/v1.2.0` - ç™¼å¸ƒåˆ†æ”¯

#### å‰ç«¯å°ˆæ¡ˆ (HealthRecord-FE) åˆ†æ”¯
- `develop` - é–‹ç™¼åˆ†æ”¯
- `staging` - æ¸¬è©¦åˆ†æ”¯
- `main` - ä¸»åˆ†æ”¯
- `feature/nutrition-ui` - åŠŸèƒ½åˆ†æ”¯
- `hotfix/mobile-layout` - ç†±ä¿®å¾©åˆ†æ”¯
- `release/v1.2.0` - ç™¼å¸ƒåˆ†æ”¯

**è©³ç´°èªªæ˜è«‹åƒè€ƒ**: [å‹•æ…‹åˆ†æ”¯åµæ¸¬åŠŸèƒ½](docs/DYNAMIC-BRANCH-DETECTION.md)

### ç’°å¢ƒå°æ‡‰é—œä¿‚

| ç’°å¢ƒ | å»ºè­°å¾Œç«¯åˆ†æ”¯ | å»ºè­°å‰ç«¯åˆ†æ”¯ | ç”¨é€” |
|------|-------------|-------------|------|
| `dev` | `develop` æˆ– `feature/*` | `develop` æˆ– `feature/*` | é–‹ç™¼ç’°å¢ƒï¼Œç”¨æ–¼åŠŸèƒ½æ¸¬è©¦ |
| `stg` | `staging` æˆ– `develop` | `staging` æˆ– `develop` | æ¸¬è©¦ç’°å¢ƒï¼Œç”¨æ–¼æ•´åˆæ¸¬è©¦ |
| `prod` | `main` æˆ– `staging` | `main` æˆ– `staging` | ç”Ÿç”¢ç’°å¢ƒï¼Œå°å¤–æœå‹™ |

**æ³¨æ„**: ç¾åœ¨æ‚¨å¯ä»¥éˆæ´»é¸æ“‡å‰å¾Œç«¯å°ˆæ¡ˆçš„ä¸åŒåˆ†æ”¯é€²è¡Œéƒ¨ç½²ï¼Œä¸å†é™åˆ¶æ–¼ç‰¹å®šçš„åˆ†æ”¯çµ„åˆã€‚

## âš™ï¸ å¿…è¦è¨­å®š

### GitHub Secrets

åœ¨ GitHub å°ˆæ¡ˆè¨­å®šä¸­è¨­å®šä»¥ä¸‹ Secretsï¼š

1. **`ZEABUR_TOKEN`** - Zeabur API Token
2. **`ZEABUR_PROJECT_ID`** - Zeabur å°ˆæ¡ˆ ID
3. **`NEXT_PUBLIC_API_URL`** - å‰ç«¯ API åŸºç¤ URL

### è¨­å®šæ­¥é©Ÿ

1. å‰å¾€ GitHub å°ˆæ¡ˆé é¢
2. é»æ“Š **Settings** æ¨™ç±¤
3. åœ¨å·¦å´é¸å–®ä¸­é¸æ“‡ **Secrets and variables** â†’ **Actions**
4. é»æ“Š **New repository secret** æŒ‰éˆ•
5. æ–°å¢ä¸Šè¿°å¿…è¦çš„ Secrets

## ğŸ”§ æœ¬åœ°é–‹ç™¼è¨­å®š

### å®‰è£å¿…è¦å·¥å…·
```bash
# å®‰è£ Git Flow æ“´å±•ï¼ˆå¯é¸ï¼‰
git flow init

# è¨­å®š Git åˆ¥å
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.st status
```

### å¸¸ç”¨ Git å‘½ä»¤
```bash
# æŸ¥çœ‹åˆ†æ”¯ç‹€æ…‹
git status

# æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯
git branch -a

# åˆ‡æ›åˆ†æ”¯
git checkout åˆ†æ”¯åç¨±

# æ‹‰å–æœ€æ–°è®Šæ›´
git pull origin åˆ†æ”¯åç¨±

# æ¨é€è®Šæ›´
git push origin åˆ†æ”¯åç¨±
```

## ğŸ“Š éƒ¨ç½²ç‹€æ…‹æª¢æŸ¥

éƒ¨ç½²å®Œæˆå¾Œï¼Œæ‚¨å¯ä»¥ï¼š

1. åœ¨ GitHub Actions é é¢æŸ¥çœ‹éƒ¨ç½²ç‹€æ…‹
2. åœ¨ Zeabur æ§åˆ¶å°æª¢æŸ¥æ‡‰ç”¨ç‹€æ…‹
3. æŸ¥çœ‹éƒ¨ç½²æ‘˜è¦å’Œæ—¥èªŒ

## ğŸš¨ æ³¨æ„äº‹é …

1. **åˆ†æ”¯ä¿è­·**: å»ºè­°ç‚º `main`ã€`staging` å’Œ `develop` åˆ†æ”¯å•Ÿç”¨ä¿è­·è¦å‰‡
2. **Code Review**: æ‰€æœ‰åˆä½µåˆ°ä¸»è¦åˆ†æ”¯çš„ç¨‹å¼ç¢¼éƒ½æ‡‰è©²ç¶“é Code Review
3. **æ¸¬è©¦**: éƒ¨ç½²å‰ç¢ºä¿æ‰€æœ‰æ¸¬è©¦éƒ½é€šé
4. **å›æ»¾**: å¦‚æœéƒ¨ç½²å¤±æ•—ï¼Œå¯ä»¥å¿«é€Ÿå›æ»¾åˆ°ä¸Šä¸€å€‹ç©©å®šç‰ˆæœ¬

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **éƒ¨ç½²å¤±æ•—**: æª¢æŸ¥ GitHub Secrets æ˜¯å¦æ­£ç¢ºè¨­å®š
2. **å»ºç½®å¤±æ•—**: æª¢æŸ¥ Dockerfile å’Œä¾è³´é…ç½®
3. **æ¸¬è©¦å¤±æ•—**: æª¢æŸ¥æ¸¬è©¦é…ç½®å’Œç’°å¢ƒè®Šæ•¸

### ç²å–å¹«åŠ©

- æŸ¥çœ‹ GitHub Actions æ—¥èªŒ
- æª¢æŸ¥ Zeabur éƒ¨ç½²ç‹€æ…‹
- è¯ç¹«é–‹ç™¼åœ˜éšŠ

---

**æœ€å¾Œæ›´æ–°**: $(date)
**ç‰ˆæœ¬**: 1.0.0
